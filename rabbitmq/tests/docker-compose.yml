version: '3'

services:
  standalone:
    image: starkandwayne/rabbitmq:edge
    hostname: standalone
    command: "start starkandwayne/rabbitmq"
    environment:
      HAB_RABBITMQ: |
        [rabbitmq]
        cluster_with="standalone"

  cluster1:
    image: starkandwayne/rabbitmq:edge
    hostname: cluster1
    command: "start starkandwayne/rabbitmq"
    environment:
      HAB_RABBITMQ: |
        [rabbitmq]
        cluster_with="standalone"

  tests:
    image: starkandwayne-rabbitmq-tests
    build: ./
    links:
      - standalone
